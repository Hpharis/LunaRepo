---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import FormattedDate from "../../components/FormattedDate.astro";

const guidePosts = (await getCollection("guides")).sort(
  (a, b) => new Date(b.data.pubDate) - new Date(a.data.pubDate)
);

const placeholder = "/assets/blog-placeholder-1.jpg";
---

<BaseLayout title="Riding Guides | TouringMag" description="Step-by-step riding guides for motorcycle touring enthusiasts.">
  <section style="max-width:1200px; margin:0 auto; padding:2rem 1rem;">
    <h1 style="font-size:2rem; font-weight:700; color:#f97316; margin-bottom:2rem;">
      Riding Guides
    </h1>

    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:2rem;">
      {guidePosts.map((post) => (
        <div style="background:#111; border-radius:12px; overflow:hidden; display:flex; flex-direction:column;">
          <a href={`/guides/${post.slug}`} style="text-decoration:none; color:inherit;">
            <img 
              src={post.data.thumbnail || post.data.heroImage || placeholder} 
              alt={post.data.title} 
              style="width:100%; height:180px; object-fit:cover;" 
            />
          </a>
          <div style="padding:1rem; flex:1; display:flex; flex-direction:column;">
            <h2 style="font-size:1.2rem; font-weight:600; color:white; margin-bottom:0.5rem;">
              <a href={`/guides/${post.slug}`} style="color:white; text-decoration:none;">
                {post.data.title}
              </a>
            </h2>
            {post.data.difficulty && (
              <p style="color:#60a5fa; font-weight:600; margin-bottom:0.5rem;">
                Difficulty: {post.data.difficulty}
              </p>
            )}
            <p style="font-size:0.8rem; color:#888; margin-top:auto;">
              <FormattedDate date={post.data.pubDate} />
            </p>
            <a 
              href={`/guides/${post.slug}`} 
              style="margin-top:1rem; align-self:flex-start; font-size:0.85rem; color:#f97316; font-weight:600; text-decoration:none;"
            >
              Read Full Guide â†’
            </a>
          </div>
        </div>
      ))}
    </div>
  </section>
</BaseLayout>



